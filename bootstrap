#
#### functions only
#

do_all () 
{
	if [[ ! -d /etc/puppet ]]; then
		mkdir /etc/puppet
	fi

	/usr/bin/wget -O /etc/puppet/namespaceauth.conf http://cf.stanford.edu/internal/namespaceauth.conf
	/usr/bin/wget -O /etc/puppet/puppet.conf http://cf.stanford.edu/internal/puppet-client.conf

}

do_deb ()
{
	aptitude install puppet || apt-get install puppet 
}

do_rhel ()
{
	/usr/bin/wget -O /etc/yum.repos.d/csdcf.repo http://cf.stanford.edu/internal/csdcf.repo
	yum remove ypbind mysql-server vncserver httpd -y
	yum update -y
	yum -y install puppet screen
}



#
#### DOING THE WORK BELOW
#

if [[ -f /etc/debian_version ]]; then
	do_deb && do_all
fi

if [[ -f /etc/redhat-release ]]; then
	do_rhel && do_all
fi
